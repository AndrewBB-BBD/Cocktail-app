@page
@model DiscoverModel

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Discover</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/CocktailApp.styles.css" asp-append-version="true" />
</head>

<h1>@Model.req</h1>

<div class="input-group mb-3">
  <input type="text" class="form-control" placeholder="Search for a cocktail" aria-label="Search for a cocktail" aria-describedby="basic-addon2">
  <div class="input-group-append">
    <button class="btn btn-outline-secondary" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
        </svg>
    </button>
  </div>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-filter-circle-fill" viewBox="0 0 16 16">
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM3.5 5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zM5 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm2 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"/>
        </svg>
    </button>
</div>

<div class="row">
      @foreach (var recipe in Model.recipesList) {
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <a class="recipe-cards" asp-page-handler="ViewRecipe" asp-route-ID="@recipe.RecipeId">
            <div class="card">
                <img class="card-img-top" src="@recipe.RecipeImage" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">@recipe.RecipeName 
                        @if (recipe.Ratings.Count > 0)
                        {
                            <span>
                                @recipe.Ratings.Average(r => r.NumStars) 
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#F8D359" class="bi bi-star-fill" viewBox="0 0 16 16">
                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                </svg>
                            </span>
                        }
                    </h5>
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stopwatch-fill" viewBox="0 0 16 16">
                            <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07A7.001 7.001 0 0 0 8 16a7 7 0 0 0 5.29-11.584.531.531 0 0 0 .013-.012l.354-.354.353.354a.5.5 0 1 0 .707-.707l-1.414-1.415a.5.5 0 1 0-.707.707l.354.354-.354.354a.717.717 0 0 0-.012.012A6.973 6.973 0 0 0 9 2.071V1h.5a.5.5 0 0 0 0-1h-3zm2 5.6V9a.5.5 0 0 1-.5.5H4.5a.5.5 0 0 1 0-1h3V5.6a.5.5 0 1 1 1 0z"/>
                        </svg> 
                        @recipe.RecipeTime min
                    </span>
                    @if (!recipe.ContaintsAlcohol) {
                        <span class="badge bg-success">Mocktail</span>
                    }
                </div>
            </div>
            </a>
        </div>
      }
</div>

<!-- Modal -->
<form method="post">
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Filter Recipes</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <ul class="list-group">
            <li class="list-group-item">Recipe Type <br>
                @foreach (var item in Model.recipeTypes)
                {
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" name="recipeType" value="@item.TypeId">
                        <label class="form-check-label" for="recipeType">@item.TypeName</label>
                    </div>
                }
            </li>
            <li class="list-group-item">Flavour Profile <br>
                @foreach (var item in Model.flavourProfiles)
                {
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="@item.FlavourName" value="@item.FlavourName">
                        <label class="form-check-label" for="@item.FlavourName">@item.FlavourName</label>
                    </div>
                }
            </li>
            <li class="list-group-item">Difficulty <br>
                @foreach (var item in Model.difficulties)
                {
                    //<span class="badge bg-dark">@item.DifficultyName</span>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="@item.DifficultyName" value="@item.DifficultyName">
                        <label class="form-check-label" for="@item.DifficultyName">@item.DifficultyName</label>
                    </div>
                }
            </li>
            <li class="list-group-item">Time</li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
</form>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
